
<html><head>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: #f4f4f9;
  color: #333;
  line-height: 1.6;
  margin: 0;
  padding: 0;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 20px;
  background-color: white;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.slang-card {
  background-color: #e6f2ff;
  border-left: 5px solid #3498db;
  margin: 15px 0;
  padding: 15px;
  transition: transform 0.3s ease;
  cursor: pointer;
}

.slang-card:hover {
  transform: translateX(10px);
  background-color: #d6ebff;
}

.slang-title {
  color: #2c3e50;
  font-weight: bold;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
}

.slang-meaning {
  color: #34495e;
}

.categories {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 20px;
}

.category-tag {
  background-color: #3498db;
  color: white;
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 0.8em;
}

header {
  background-color: #2c3e50;
  color: white;
  text-align: center;
  padding: 20px;
  position: relative;
}

.search-container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-bottom: 20px;
}

#searchInput, #categorySelect, #yearSelect {
  padding: 10px;
  font-size: 16px;
  border: 2px solid #3498db;
  border-radius: 5px;
}

.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 20px;
}

.pagination button {
  margin: 0 10px;
  padding: 5px 10px;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.pagination button:disabled {
  background-color: #bdc3c7;
  cursor: not-allowed;
}

.detail-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.detail-modal-content {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  max-width: 500px;
  text-align: left;
  position: relative;
  box-shadow: 0 4px 6px rgba(0,0,0,0.2);
}

.close-detail-modal {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 24px;
  cursor: pointer;
}

.detail-section {
  margin-bottom: 15px;
}

.detail-label {
  font-weight: bold;
  color: #2c3e50;
  margin-right: 10px;
}

.info-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  max-width: 500px;
  text-align: center;
  position: relative;
}

.close-modal {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 24px;
  cursor: pointer;
}

.like-section {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 15px;
}

.like-section button {
  background-color: #e74c3c;
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 5px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
}

.like-section button:hover {
  background-color: #c0392b;
}

.read-more-btn {
  display: inline-block;
  background-color: #3498db;
  color: white;
  padding: 10px 15px;
  text-decoration: none;
  border-radius: 5px;
  margin-top: 15px;
  text-align: center;
  transition: background-color 0.3s ease;
}

.read-more-btn:hover {
  background-color: #2980b9;
}

.tiktok-context {
  background-color: #f7f1e5;
  color: #333;
  padding: 15px;
  text-align: center;
  font-size: 0.9em;
  border-top: 2px solid #ff4500;
  margin-top: 10px;
}

.content-sections {
  max-width: 1200px;
  margin: 20px auto;
  padding: 0 20px;
}

.intro-section, .features-section, .cta-section, .testimonial-section {
  text-align: center;
  margin-bottom: 40px;
  padding: 30px 0;
}

.feature-grid {
  display: flex;
  justify-content: space-between;
  gap: 20px;
}

.feature-card {
  flex: 1;
  background-color: #f8f9fa;
  padding: 20px;
  border-radius: 10px;
  transition: transform 0.3s;
}

.feature-card:hover {
  transform: translateY(-10px);
}

.feature-card i {
  font-size: 48px;
  color: #3498db;
  margin-bottom: 15px;
}

.cta-buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}

.cta-btn {
  display: inline-block;
  padding: 12px 24px;
  border-radius: 5px;
  text-decoration: none;
  transition: background-color 0.3s;
}

.primary-btn {
  background-color: #3498db;
  color: white;
}

.secondary-btn {
  background-color: transparent;
  color: #3498db;
  border: 2px solid #3498db;
}

.testimonial-grid {
  display: flex;
  gap: 20px;
}

.testimonial-card {
  flex: 1;
  background-color: #f1f3f5;
  padding: 20px;
  border-radius: 10px;
}

.testimonial-author {
  display: flex;
  align-items: center;
  margin-top: 15px;
}

.testimonial-author img {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  margin-right: 15px;
}

footer {
  background-color: #2c3e50;
  color: white;
  padding: 40px 20px;
}

.footer-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
}

.footer-section {
  flex: 1;
  margin: 0 15px;
}

.footer-section h4 {
  margin-bottom: 15px;
  border-bottom: 2px solid #3498db;
  padding-bottom: 10px;
}

.footer-section ul {
  list-style: none;
  padding: 0;
}

.footer-section ul li {
  margin-bottom: 10px;
}

.footer-section a {
  color: #ecf0f1;
  text-decoration: none;
  transition: color 0.3s ease;
}

.footer-section a:hover {
  color: #3498db;
}

.social-links {
  display: flex;
  gap: 15px;
}

.social-links a {
  font-size: 24px;
  color: white;
}

.footer-bottom {
  text-align: center;
  padding-top: 20px;
  border-top: 1px solid #34495e;
  margin-top: 20px;
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.17.5/dist/xlsx.full.min.js"></script>
</head>
<body>
<header>
  <h1>&#x1f1e8;&#x1f1f3; Chinese Slang Explorer</h1>
  <div class="search-container">
    <input type="text" id="searchInput" placeholder="Search Chinese slang...">
    <select id="categorySelect">
      <option value>All Categories</option>
    </select>
    <select id="yearSelect">
      <option value>All Years</option>
    </select>
  </div>
  <button style="position: absolute; right: 20px; top: 20px; background-color: transparent; color: white; border: none; cursor: pointer;" onclick="openInfoModal()">&#x2139;&#xfe0f; About</button>
  <div class="tiktok-context">
    <p>&#x1f30d; Attention TikTok Refugees! &#x1f680; Navigate the Chinese internet slang landscape with ease. These trendy terms will help you understand viral content, memes, and online conversations.</p>
  </div>
</header>

<div class="container" id="slangContainer">
  <!-- Slang entries will be dynamically populated here -->
</div>

<div class="pagination">
  <button id="prevPage" disabled>Previous</button>
  <span id="pageInfo">Page 1 of 1</span>
  <button id="nextPage" disabled>Next</button>
</div>

<div class="content-sections">
  <section class="intro-section">
    <h2>Decode China&apos;s Digital Language</h2>
    <p>Navigate the fast-paced world of Chinese internet slang with confidence. From viral TikTok trends to WeChat conversations, stay ahead of the curve.</p>
  </section>

  <section class="features-section">
    <h2>Why Chinese Slang Explorer?</h2>
    <div class="feature-grid">
      <div class="feature-card">
        <i class="fas fa-search"></i>
        <h3>Easy Search</h3>
        <p>Quickly find slang by characters, meanings, or categories</p>
      </div>
      <div class="feature-card">
        <i class="fas fa-globe"></i>
        <h3>Cultural Insights</h3>
        <p>Understand the context and nuances behind trendy expressions</p>
      </div>
      <div class="feature-card">
        <i class="fas fa-book"></i>
        <h3>Continuous Updates</h3>
        <p>Always current with the latest internet language trends</p>
      </div>
    </div>
  </section>

  <section class="cta-section">
    <h2>Start Your Slang Journey Today!</h2>
    <p>Don&apos;t miss out on understanding China&apos;s digital communication landscape.</p>
    <div class="cta-buttons">
      <a href="#slangContainer" class="cta-btn primary-btn">Explore Slang</a>
      <a href="https://slang-site.com/newsletter" class="cta-btn secondary-btn">Get Weekly Updates</a>
    </div>
  </section>

  <section class="testimonial-section">
    <h2>What Users Say</h2>
    <div class="testimonial-grid">
      <div class="testimonial-card">
        <blockquote>&quot;This tool transformed my TikTok experience! Now I understand all the viral Chinese memes.&quot;</blockquote>
        <div class="testimonial-author">
          <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Sarah K.">
          <span>Sarah K., Digital Nomad</span>
        </div>
      </div>
      <div class="testimonial-card">
        <blockquote>&quot;As a language learner, this is my secret weapon for modern Chinese communication.&quot;</blockquote>
        <div class="testimonial-author">
          <img src="https://randomuser.me/api/portraits/men/85.jpg" alt="Michael L.">
          <span>Michael L., Language Enthusiast</span>
        </div>
      </div>
    </div>
  </section>
</div>

<div id="infoModal" class="info-modal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeInfoModal()">&#xd7;</span>
    <h2>About Chinese Slang Explorer</h2>
    <p>&#x1f310; Designed for TikTok users, digital linguists, and culture enthusiasts!</p>
    <p>Dive into the dynamic world of Chinese internet slang. Whether you&apos;re scrolling through TikTok, WeChat, or Weibo, this tool helps you decode the latest viral expressions and understand the cultural nuances behind trendy terms.</p>
    <p>&#x1f310; Features:
      </p><ul>
        <li>Search by Chinese characters, English names, or meanings</li>
        <li>Filter by category and year</li>
        <li>Sorted by word complexity</li>
      </ul>
    <p></p>
    <p>Explore how language evolves in the digital age!</p>
  </div>
</div>

<div id="detailModal" class="detail-modal">
  <div class="detail-modal-content">
    <span class="close-detail-modal" onclick="closeDetailModal()">&#xd7;</span>
    <div id="detailModalContent"></div>
    <div class="like-section">
      <button><i class="fas fa-thumbs-up"></i> Like</button>
    </div>
  </div>
</div>

<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-section">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="https://slang-site.com">Home</a></li>
        <li><a href="https://slang-site.com/about">About</a></li>
        <li><a href="https://slang-site.com/newsletter">Newsletter</a></li>
        <li><a href="https://slang-site.com/contribute">Contribute</a></li>
      </ul>
    </div>
    <div class="footer-section">
      <h4>Connect</h4>
      <div class="social-links">
        <a href="https://twitter.com/chineseslangexp" target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://instagram.com/chineseslangexplorer" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://github.com/chineseslangexp" target="_blank"><i class="fab fa-github"></i></a>
      </div>
    </div>
    <div class="footer-section">
      <h4>Legal</h4>
      <ul>
        <li><a href="https://slang-site.com/privacy">Privacy Policy</a></li>
        <li><a href="https://slang-site.com/terms">Terms of Service</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&#xa9; 2023 Chinese Slang Explorer. All rights reserved.</p>
  </div>
</footer>

<script>async function loadSlangData() {
  try {
    const storedData = localStorage.getItem('slangData');
    if (storedData) {
      const parsedData = JSON.parse(storedData);
      if (parsedData.length > 0) {
        parsedData.sort((a, b) => (b.chinese?.length || 0) - (a.chinese?.length || 0));
        return parsedData;
      }
    }
    const convertedData = await convertExcelToJson();
    if (convertedData.length === 0) {
      const response = await fetch('/slang-data.json');
      const slangData = await response.json();
      slangData.sort((a, b) => (b.chinese?.length || 0) - (a.chinese?.length || 0));
      return slangData;
    }
    convertedData.sort((a, b) => (b.chinese?.length || 0) - (a.chinese?.length || 0));
    return convertedData;
  } catch (error) {
    console.error('Error loading slang data:', error);
    return [];
  }
}
async function convertExcelToJson() {
  try {
    const files = ['/流行语分类终.xlsx', '/word.xlsx'];
    let allProcessedData = [];
    for (const filePath of files) {
      const response = await fetch(filePath);
      const arrayBuffer = await response.arrayBuffer();
      const workbook = XLSX.read(arrayBuffer, {
        type: 'buffer'
      });
      const worksheet = workbook.Sheets[workbook.SheetNames[0]];
      const data = XLSX.utils.sheet_to_json(worksheet);
      const processedData = data.map(entry => {
        if (filePath.includes('流行语分类终')) {
          return {
            chinese: entry.流行语名称 || '',
            englishName: entry.英文名称 || '',
            englishMeaning: entry.英文解释 || '',
            year: entry.年份 ? entry.年份.toString() : '',
            category: entry['内容细分'] || '',
            pronunciation: entry.发音 || '',
            sourceLink: entry.来源链接 || ''
          };
        } else if (filePath.includes('word')) {
          return {
            chinese: entry.Chinese || '',
            englishName: entry.English || ''
          };
        }
        return entry;
      });
      allProcessedData = [...allProcessedData, ...processedData];
    }
    const uniqueData = Array.from(new Set(allProcessedData.map(JSON.stringify))).map(JSON.parse).filter(entry => entry.chinese);
    localStorage.setItem('slangData', JSON.stringify(uniqueData));
    return uniqueData;
  } catch (error) {
    console.error('Excel to JSON conversion error:', error);
    return [];
  }
}
window.addEventListener('load', async () => {
  const storedData = localStorage.getItem('slangData');
  if (!storedData) {
    await convertExcelToJson();
  }
  const lastUpdateTime = localStorage.getItem('slangDataUpdateTime');
  const currentTime = Date.now();
  if (!lastUpdateTime || currentTime - parseInt(lastUpdateTime) > 7 * 24 * 60 * 60 * 1000) {
    await convertExcelToJson();
    localStorage.setItem('slangDataUpdateTime', currentTime.toString());
  }
});
function openInfoModal() {
  document.getElementById('infoModal').style.display = 'flex';
}
function closeInfoModal() {
  document.getElementById('infoModal').style.display = 'none';
}
function openDetailModal(entry) {
  const detailModalContent = document.getElementById('detailModalContent');
  if (!slangLikes[entry.chinese]) {
    slangLikes[entry.chinese] = 0;
  }
  detailModalContent.innerHTML = `
    <div class="detail-section">
      <span class="detail-label">Chinese:</span> 
      <span>${entry.chinese}</span>
    </div>
    <div class="detail-section">
      <span class="detail-label">English Name:</span> 
      <span>${entry.englishName}</span>
    </div>
    <div class="detail-section">
      <span class="detail-label">Meaning:</span> 
      <span>${entry.englishMeaning}</span>
    </div>
    <div class="detail-section">
      <span class="detail-label">Category:</span> 
      <span>${entry.category}</span>
    </div>
    <div class="detail-section">
      <span class="detail-label">Year:</span> 
      <span>${entry.year}</span>
    </div>
    <div class="detail-section">
      <span class="detail-label">Pronunciation:</span> 
      <span>${entry.pronunciation || 'Not available'}</span>
    </div>
    <div class="detail-section">
      <span class="detail-label">Source:</span> 
      <a href="${entry.sourceLink || '#'}" target="_blank">${entry.sourceLink || 'No source link'}</a>
    </div>
    <div class="detail-section like-section">
    </div>
  `;
  const likeSection = detailModalContent.querySelector('.like-section');
  if (likeSection) {
    likeSection.innerHTML = `
      <a href="https://slang-site.com/slang/${encodeURIComponent(entry.chinese)}" 
         class="read-more-btn" 
         target="_blank">
        Read More About This Slang
      </a>
    `;
  }
  document.getElementById('detailModal').style.display = 'flex';
}
function closeDetailModal() {
  document.getElementById('detailModal').style.display = 'none';
}
async function initializeSlangDirectory() {
  const slangEntries = await loadSlangData();
  console.log('Total slang entries:', slangEntries.length);
  if (slangEntries.length === 0) {
    slangEntries.push({
      chinese: 'No Data Loaded',
      englishName: 'Error',
      englishMeaning: 'Unable to fetch slang data. Please check the data source.',
      year: '',
      category: 'Error'
    });
  }
  setupCategoryAndYearFilters(slangEntries);
  let currentEntries = slangEntries;
  let currentPage = 1;
  const renderWithPagination = (entries, page) => {
    const result = renderSlangEntries(entries, page);
    currentEntries = result.entries;
    currentPage = result.page;
  };
  renderWithPagination(slangEntries, 1);
  const searchInput = document.getElementById('searchInput');
  const categorySelect = document.getElementById('categorySelect');
  const yearSelect = document.getElementById('yearSelect');
  const filterEntries = () => {
    const searchTerm = searchInput.value.toLowerCase();
    const selectedCategory = categorySelect.value;
    const selectedYear = yearSelect.value;
    const categories = [...new Set(slangEntries.map(entry => entry.category || entry['内容细分']).filter(Boolean))];
    const filteredEntries = slangEntries.filter(entry => {
      const entryCategory = entry.category || entry['内容细分'] || '';
      
      const categoryMatch = selectedCategory === '' || 
        (selectedCategory === 'Other' 
          ? !categories.slice(0, -1).includes(entryCategory.trim()) 
          : entryCategory.trim().toLowerCase() === selectedCategory.toLowerCase());
      
      return (searchTerm === '' || 
              (entry.chinese || '').toLowerCase().includes(searchTerm) || 
              (entry.englishName || '').toLowerCase().includes(searchTerm) || 
              (entry.englishMeaning || '').toLowerCase().includes(searchTerm)) && 
             categoryMatch && 
             (selectedYear === '' || entry.year === selectedYear);
    });
    
    renderWithPagination(filteredEntries, 1);
  };
  searchInput.addEventListener('input', filterEntries);
  categorySelect.addEventListener('change', filterEntries);
  yearSelect.addEventListener('change', filterEntries);
  document.getElementById('prevPage').addEventListener('click', () => {
    if (currentPage > 1) {
      renderWithPagination(currentEntries, currentPage - 1);
    }
  });
  document.getElementById('nextPage').addEventListener('click', () => {
    if (currentPage < Math.ceil(currentEntries.length / 20)) {
      renderWithPagination(currentEntries, currentPage + 1);
    }
  });
}
let slangLikes = {};
function setupCategoryAndYearFilters(slangEntries) {
  const categorySelect = document.getElementById('categorySelect');
  const yearSelect = document.getElementById('yearSelect');
  const categories = [
    ...new Set(
      slangEntries
        .map(entry => entry.category || entry['内容细分'])
        .filter(Boolean)
        .map(cat => cat.trim())
    )
  ];
  categories.push('Other'); // Ensure Other category is added
  categories.sort();
  // Clear existing options first
  categorySelect.innerHTML = '<option value="">All Categories</option>';
  categories.forEach(cat => {
    const option = document.createElement('option');
    option.value = cat;
    option.textContent = cat;
    categorySelect.appendChild(option);
  });
  const years = [...new Set(slangEntries.map(entry => entry.year).filter(Boolean))];
  years.sort().forEach(year => {
    const option = document.createElement('option');
    option.value = year;
    option.textContent = year;
    yearSelect.appendChild(option);
  });
}
function renderSlangEntries(entries, page = 1, entriesPerPage = 20) {
  const container = document.getElementById('slangContainer');
  const prevButton = document.getElementById('prevPage');
  const nextButton = document.getElementById('nextPage');
  const pageInfo = document.getElementById('pageInfo');
  const startIndex = (page - 1) * entriesPerPage;
  const endIndex = startIndex + entriesPerPage;
  const paginatedEntries = entries.slice(startIndex, endIndex);
  console.log('Rendering entries:', paginatedEntries);
  container.innerHTML = paginatedEntries.map(entry => `
    <div class="slang-card" onclick='openDetailModal(${JSON.stringify(entry)})' style="display: ${entry.chinese ? 'block' : 'none'}">
      <div class="slang-title">
        <span>${entry.chinese || 'No Data'}</span>
        <span style="font-size: 0.8em; color: #7f8c8d;">${entry.englishName || 'N/A'}</span>
      </div>
      <div class="slang-meaning">${entry.englishMeaning || 'No meaning available'}</div>
      <div class="categories">
        <span class="category-tag">${entry.category || 'Uncategorized'}</span>
        <span class="category-tag">${entry.year || 'Unknown Year'}</span>
        <span class="category-tag">
          <i class="fas fa-heart" style="margin-right: 5px;"></i> 
          ${slangLikes[entry.chinese] || 0} Likes
        </span>
      </div>
    </div>
  `).join('');
  const totalPages = Math.ceil(entries.length / entriesPerPage);
  pageInfo.textContent = `Page ${page} of ${totalPages}`;
  prevButton.disabled = page === 1;
  nextButton.disabled = page === totalPages;
  return {
    entries,
    page,
    totalPages
  };
}
window.openInfoModal = openInfoModal;
window.closeInfoModal = closeInfoModal;
window.openDetailModal = openDetailModal;
window.closeDetailModal = closeDetailModal;
window.slangLikes = slangLikes;
initializeSlangDirectory();</script>
</body>
</html>
